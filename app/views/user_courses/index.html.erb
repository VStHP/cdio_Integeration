<% provide :title,  "Select User" %>
<div class="kp-courses-box"  style="position: relative;">
  <div class="margin-select col-md-12 text-right">
    <h2 style="text-align: center;color: red">
      <%= link_to @course.name, @course %>
      <small>Subject Select</small></h2>
    <h5 style="text-align: center;color: blue">
      <%= link_to "Edit Course", edit_course_path(@course) %>
      <%= link_to "Subject of Course", course_subjects_path(course_id: @course.id) %>
    </h5>
  </div>
  <div class="tab-select col-md-12 text-right">
    <div class="nav-tabs-custom">
      <ul class="nav nav-tabs">
        <li class="active" id="li-trainer">
          <a id="active-trainer" data-toggle="tab">
            Trainers
          </a>
        </li>
        <li id="li-trainee">
          <a id="active-trainee" data-toggle="tab">
            Trainees
          </a>
        </li>
      </ul>
    </div>
  </div>
  <div class="courses-index">
    <div class="course-container xt-height content-block active" id="trainer">
      <table>
        <tr>
          <td>
            <%= form_for @course.user_courses.build, :url => {:action => "del_user_courses"}, remote: true do %>
              <%= hidden_field_tag :course_id, @course.id %>
              <% define_column @trainer_courses %>
              <table>
                <h4 style="color: green">Course's Trainers</h4>
                <tr class="list" id="trainer-added-list">
                  <% if @trainer_courses.size == 0 %>
                    <label>Let's add trainer for course</label>
                  <% end %>
                    <%= render partial: "trainer_added", collection: @trainer_courses, as: :trainer %>
                </tr>
                <tr class="bton">
                  <td>
                    <button type="submit" class="btn btn-primary">Remove from Course</button>
                  </td>
                </tr>
              </table>
            <% end %>
          </td>
          <td>
            <div class="search-form">
              <%= form_tag user_courses_path, method: "get", id: "trainer_search" do %>
                <%= hidden_field_tag :course_id, @course.id %>
                <%= text_field_tag :search, params[:search], class: "search-input", placeholder: "Input name user" %>
                <%= submit_tag "Search", class: "search-btn" %>
              <% end %>
            </div>
            <% if @all_trainers.present? %>
              <div id="trainer-list">
                <%= form_for @course.user_courses.build, remote: true do %>
                  <%= hidden_field_tag :course_id, @course.id %>
                  <% define_column @all_trainers %>
                  <table>
                    <h4 style="color: #2c028a">Another Trainers</h4>
                    <tr class="list">
                      <%= render partial: "trainer_adding", collection: @all_trainers,
                        as: :trainer %>
                    </tr>
                    <tr class="bton">
                      <td>
                        <button type="submit" class="btn btn-primary">Add into Course</button>
                      </td>
                    </tr>
                  </table>
                <% end %>
              </div>
            <% end %>
          </td>
        </tr>
      </table>
    </div>
    <div class="course-container xt-height content-block" id="trainee">
      <table>
        <tr>
          <td>
            <%= form_for @course.user_courses.build, :url => {:action => "del_user_courses"}, remote: true do %>
              <%= hidden_field_tag :course_id, @course.id %>
              <% define_column @trainee_courses %>
              <table>
                <h4 style="color: green">Course's Trainees</h4>
                <tr class="list">
                    <%= render partial: "trainee_added", collection: @trainee_courses, as: :trainee %>
                </tr>
                <tr>
                  <td>
                    <button type="submit" class="btn btn-primary">Remove from Course</button>
                  </td>
                </tr>
              </table>
            <% end %>
          </td>
          <td>
            <div class="search-form">
              <%= form_tag user_courses_path, method: "get" do %>
                <%= hidden_field_tag :course_id, @course.id %>
                <%= text_field_tag :search_trainee, params[:search_trainee], class: "search-input", placeholder: "Input name user" %>
                <%= submit_tag "Search", class: "search-btn" %>
              <% end %>
            </div>
            <% if @all_trainees.present? %>
              <div id="trainee-list">
                <%= form_for @course.user_courses.build, remote: true do %>
                  <%= hidden_field_tag :course_id, @course.id %>
                  <% define_column @all_trainees %>
                  <table>
                    <h4 style="color: #2c028a">Another Trainees</h4>
                    <tr class="list">
                      <%= render partial: "trainee_adding", collection: @all_trainees,
                        as: :trainee %>
                    </tr>
                    <tr>
                      <td>
                        <button type="submit" class="btn btn-primary">Add into Course</button>
                      </td>
                    </tr>
                  </table>
                <% end %>
              </div>
            <% end %>
          </td>
        </tr>
      </table>
    </div>
  </div>
</div>
<script type="text/javascript">
  <% if @option == "trainee" %>
    alert('can bo sung tu dong click data-toggle');
  <% end %>
  $('#active-trainer').click(function(){
    if($('#trainee').hasClass('active')){
      $('#trainer').addClass('active');
      $('#trainee').removeClass('active');
    }
  });
  $('#active-trainee').click(function(){
    if($('#trainer').hasClass('active')){
      $('#trainee').addClass('active');
      $('#trainer').removeClass('active');
    }
  });
</script>

<style type="text/css">
  td {
    width: 50%;
    border-right: 1px solid #eee;
  }
  .search-form {
    position: absolute;
    right: 50px;
    top: 105px;
  }
  .search-input {
    width: 187px !important;
    background: white !important;
    border: 1px solid #b7b6b6 !important;
    position: absolute;
    right: 69px;
  }
  .search-btn {
    position: absolute;
    right: -33px;
    top: -6px;
  }
  .list {
    height: 300px;
  }
  .nav-tabs-custom {
    background: #d4d2d2;
  }
  nav-tabs-custom>.nav-tabs>li.active {
    border-top-color: #3c8dbc;
  }
  .nav-tabs .active a {
      background: rgb(145, 209, 255) !important;
  }
  .content-block {
    display: none;
  }
  .active {
    display: block;
  }
</style>
